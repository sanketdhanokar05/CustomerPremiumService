package com.abc.cpservice.service;

import static org.mockito.Mockito.times;
import static org.mockito.Mockito.verify;
import static org.mockito.Mockito.when;

import java.time.LocalDate;

import org.junit.jupiter.api.Test;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.springframework.boot.test.context.SpringBootTest;

import com.abc.cpservice.entity.Premium;
import com.abc.cpservice.repository.PremiumRepository;

@SpringBootTest
public class PremiumServiceTest {

	@InjectMocks
	private PremiumService premiumService = new PremiumServiceImpl();

	@Mock
	private PremiumRepository premiumRepository;

//	@Test
//    public void testSavePremium() {
//       
//		Premium premium = new Premium();
//        premium.setPremiumId(1);
//        premium.setCustomerId(103);
//        premium.setProductId(106);
//        premium.setPremiumAmount(2465.5);
//        premium.setPaidDate(LocalDate.of(2020, 03, 05));
//        premium.setDueDate(LocalDate.of(2022, 03, 03));
//           
//       
//        when(premiumRepository.save(premium)).thenReturn(premium);
//       
//        Premium newPremium = premiumService.addPremium(premium);
//       
//        //assertEquals(product.getProductName(), newProduct.getProductName(customerProduct));
//       
//        verify(premiumRepository,times(1)).save(premium);          
//    }

	
//	@Test
//    public void testSavePremium1() {
//       
//		Premium premium = new Premium();
//		premium.setPremiumId(1);
//		premium.setCustomerId(103);
//		premium.setProductId(106);
//		premium.setPremiumAmount(2465.5);
//		premium.setPaidDate(LocalDate.of(2020, 03, 05));
//		premium.setDueDate(LocalDate.of(2022, 03, 03));
//       
//        when(premiumRepository.save(premium)).thenReturn(premium);
//       
//        Premium newCustomer = premiumService.addPremium(premium);
//       
//        //assertEquals(customer.customerName(), newCustomer.customerName());
//       
//        verify(premiumRepository,times(1)).save(premium);       
//       
//    }
	
	
	
	
	
	
//	@Test
//	public void testSavePremium() {
//
//		Premium premium = new Premium();
//		premium.setPremiumId(1);
//		premium.setCustomerId(103);
//		premium.setProductId(106);
//		premium.setPremiumAmount(2465.5);
//		premium.setPaidDate(LocalDate.of(2020, 03, 05));
//		premium.setDueDate(LocalDate.of(2022, 03, 03));
//
//		when(premiumRepository.save(premium)).thenReturn(premium);
//
//		Premium newPremium = premiumService.addPremium(premium);
//
//		verify(premiumRepository, times(1)).save(premium);
//	}

	
	@Test
    public void testSavePremium() {
       
		Premium premium = new Premium();
		premium.setPremiumId(1);
		premium.setCustomerId(103);
		premium.setProductId(106);
		premium.setPremiumAmount(2465.5);
		premium.setPaidDate(LocalDate.of(2020, 03, 05));
		premium.setDueDate(LocalDate.of(2022, 03, 03));
       
        when(premiumRepository.save(premium)).thenReturn(premium);
       
        Premium newPremium = premiumService.addPremium(premium);
       
        //assertEquals(customer.customerName(), newCustomer.customerName());
       
        verify(premiumRepository,times(1)).save(premium);       
       
    }
	
	
	
//	@Test
//	public void testgetPremiumDetails() {
//		
//			Premium premium = new Premium();
//	        premium.setPremiumId(1);
//	        premium.setCustomerId(103);
//	        premium.setProductId(106);
//	        premium.setPremiumAmount(2465.5);
//	        premium.setPaidDate(LocalDate.of(2020, 03, 03));
//	        premium.setDueDate(LocalDate.of(2022, 03, 03));
//		
//		int premiumId=1;
//		Optional<Premium> optionalPremium=Optional.of(premium);
//		
//		when(premiumRepository.findById(1)).thenReturn(optionalPremium);
//		
//		Premium existing=premiumService.viewPremium(premiumId);
//		
//		assertEquals(premium.getPremiumId(),existing.getPremiumId());	
//	}
}